<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="Cache-Control" content="public, max-age=31536000">
    <meta http-equiv="Expires" content="Mon, 14 Mar 2024 00:00:00 GMT">

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Desarrollo Django</title>
    <link rel="shortcut icon" type=image/jpg href="../../img/logo/favicon.ico"/>
    <link href="https://fonts.googleapis.com/css2?family=Carrois+Gothic+SC&display=swap" rel="stylesheet"> 
    <link rel="stylesheet" href="../../css/stylesBlue.css">

</head>
<body>
    <div class="context">
        <a href="../10/index.html">Volver</a>
        <a href="../../index.html">Inicio</a>
        <a href="../12/index.html">Siguiente</a>
    </div>
    <div class="contenido_p" id="arriba">
        <p>Desarrollo Django</p>
    </div>

    <h1 class="contenido_p">11 - Base de Datos - 2 (Clase 19)</h1>
    <ul class="contenido_p">
        <li>
            <a href="#1">1. Recordemos</a>
        </li>
        <li>
            <a href="#2">2. ORM</a>
        </li>
        <li>
            <a href="#3">3. Django - Models first</a>
        </li>
        <li>
            <a href="#4">4. ¿Qué son las Migraciones?</a>
        </li>
        <li>
            <a href="#5">5. Migración inicial</a>
        </li>
        
    </ul>

    <p class="contenido_p" id="1">1. Recordemos</p>
    <pre>
        <img src="../../img/img_ref/img27.jpg" alt="">
        <img src="../../img/img_ref/img28.jpg" alt="">

        ORM desacopla la base de datos del proyecto pudiendo 
        cambiar de postgresql a mysql u otras de las soportadas siendo
        “transparente” para el proyecto        

        <img src="../../img/img_ref/img29.jpg" alt="">

        Configuramos desde el archivo settings.py
 
        Necesitamos esa librería, con la cual django se comunica con la base de datos.
            -> La librería resulta ser el "conector"
        La instalamos dentro del entorno virtual.. 
            - pip install psycopg2
    </pre>
    <div class="context">
        <a href="#arriba">Arriba</a>
    </div>

    <p class="contenido_p" id="2">2. ORM</p>
    <pre>
        <img src="../../img/extras/11-2.jpg" alt="">
        El Orm, mapping o Orm, hace una traducción entre el modelo de clase y las tablas.   
    </pre>
    <div class="context">
        <a href="#arriba">Arriba</a>
    </div>
    
    <p class="contenido_p" id="3">3. Django - Models first</p>
    <pre>
        <img src="../../img/img_ref/img26.jpg" alt="">
        Es decir, a través de los modelos que especifiquemos, modelaremos la base de datos.
        Esta forma es para Django.. C# Tiene opciones.
    
        * No es TAN importante el motor de base de datos..
        - Lo importante es el armado de modelo, luego cambiamos el conector, de acuerdo a la librería para cambiar de base de datos.
        
        Cada app dentro de nuestro proyecto, tendrá su propio models.py.. De acuerdo a las necesidades de nuestro proyecto.
        
        Desde el modelo, va todo hacia las tablas.. 
        
        Lo unico que creamos en el servidor, es la base de datos..
            - Vacia, con el nombre deseado.
        
        
        Django, pensado para Sql..
        Mongo        
    </pre>
    <div class="context">
        <a href="#arriba">Arriba</a>
    </div>
    <p class="contenido_p" id="4">4. ¿Qué son las Migraciones?</p>
    <pre>
        Las migraciones son la forma en que Django propaga los cambios que
        realiza en sus modelos (agregar un campo, eliminar un modelo, etc) en 
        el esquema de su base de datos. Están diseñadas para ser en su 
        mayoría automáticas, pero es necesario saber cuando realizar 
        migraciones, ejecutarlas y que problemas se pueden enconrtar.        
    </pre>
    <div class="context">
        <a href="#arriba">Arriba</a>
    </div>

    <p class="contenido_p" id="5">5. Migración inicial</p>
    <pre>
        <img src="../../img/extras/11-5.jpg" alt="">

        Migraciones, son archivos de python.. 
        Que registran todo.. Algo así como transacciones DDL
    
        python manage.py migrate        -> 
        
        
        Debemos iniciar el servicio de la base de datos.
        
        Corrobar si la librería se encuentra... postgresql_psycopg2
        
        ----------------------- Desde settings de nuestro proyecto..
        <code>
        DATABASES = {
            'default': {
                'ENGINE': 'django.db.backends.postgresql_psycopg2',
                'NAME': 'pig_22820_2',
                'USER': 'postgres',
                'PASSWORD': 'Fortin94',
                # localhost en caso de tenerlo en local y la URL de la base de datos en caso de tenerlo en algún servicio en la nube
                'HOST': 'localhost',
                'PORT': '5432'  # Si usas el puerto default no pongas esta línea y si lo has cambiado especifícaselo aquí
            }
        }
        </code>
        
            - python manage.py migrate     -> Debemos correr.
        
        
        * La información settings.py -> Se puede obviar en el gitignore.
        
        Una configuración para ambiente local, remoto.. Good School for Django (Buenas Prácticas)
        
        Podemos levantar el server con un setting en específico..
        De esta manera podemos elegir el settings, en cuestión.
        
            - python .\manage.py runserver --settings=nombreDelProyecto.settings
        
        -----------------------
        
        Las migraciones es una manera de traducir un modelo a una tabla en python.
        
            - python manage.py makemigrations   -> Crea todas las migraciones con las modificaiones realizadas. 
            - python manage.py migrate          -> Aplicamos todas las migraciones en la tabla. 
            
        -----------------------        
    </pre>
    <div class="context">
        <a href="#arriba">Arriba</a>
    </div>


  
    
    <div class="context">
        <a href="../10/index.html">Volver</a>
        <a href="../../index.html">Inicio</a>
        <a href="../12/index.html">Siguiente</a>
    </div>

    <script src="js/01.js"></script>

</body>
</html>